import Page from "@reason/pages/Docs";
export default Page({ title: "Snapps: SNARK Powered Applications" });

# Snapps: Приложения на базе SNARK

<Alert kind="warning">

  Начиная с версии `0.0.16-beta7` эта функция была отключена и может быть активирована только путем включения флага времени сборки. Мы планируем включить эту функцию в будущих релизах.

</Alert>

### Snapps = децентрализованные приложения (Dapps) + приватность + офчейн данные + масштабируемость

Будучи самым легким блокчейном в мире, Mina предлагает совершенно новую категорию приложений под названием Snapps <Footnote refNumber="[3]" link="/disclaimers" /> : Snarkified Applications. Snapps функционально похожи на децентрализованные приложения (Dapps) на платформе Ethereum, но превосходят их благодаря трем особым свойствам:

1. Проверка целостности частей данных, не раскрывая их.
2. Проверка правильности выполнения дорогостоящих вычислений.
3. Значительные преимущества масштабируемости.

Эти типы приложений не обязательно новые. В некотором смысле оба приложения существуют как современные блокчейны: ZCash как Snapp со свойством 1 и Mina как Snapp со свойством 2.

Snapp также значительно более эффективен, чем Dapp в Ethereum. Чтобы мировой компьютер Ethereum взял на себя обязательство перед своими пользователями по задействованию Dapp, каждая нода и майнер в сети должны выполнять одни и те же вычисления. Это неприлично неэффективно. С помощью Snapp на базе Mina, Snapp запускается разработчиком, после чего все остальные ноды могут просто верифицировать соответствующее SNARK доказательство. Подобное утверждение может быть применено к Dapps второго уровня на базе SNARK в Ethereum, однако эти Dapps по-прежнему обременены ограниченной пропускной способностью основной цепочки, тогда как Snapp на базе Mina извлекает выгоду из потенциала масштабируемости блокчейна Mina благодаря его сжатой структуре.

В общем плане, Snapp в сети Mina работает следующим образом:

1. Определяет код для запуска, раскрывает его исходный код, если он еще не был открыт
2. Использует код для развертывания схемы SNARK путем вызова функции в сети Mina
3. Получает данные для выполнения вычислений 
4. Вызывает функции с соответствующими данными
5. Выполняет вычисления в цепочке, аналогично смарт-контракту [готово через 6-12 месяцев после mainnet]
6. Присоединяет SNARK доказательство, возвращенное из функции, к адресу Mina
7. Mina проводит транзакции на основе результатов SNARK доказательств

## Технический обзор 

В нынешнем виде, Mina's Snapps будет работать следующим образом.

- Появится новый вид учетной записи, называемой “Snapp аккаунт”, в которой помимо открытого ключа и баланса также будет храниться ключ проверки Pickles SNARK K и состояние S, состоящее из небольшого массива элементов поля. 
- Появится новый вид транзакции, называемый “Single Snapp-транзакция”, что позволит выполнять переход в стандартную учетную запись и обратно, а также обновлять состояние Snapp. Оно будет содержать:

  - Стандартный адрес учетной записи
  - Адрес Snapp аккаунта
  - Подписанную сумму “snapp_account_delta”, которая отображает изменение баланса для Snapp аккаунта
  - Опциональное новое состояние “snapp_new_state” для Snapp аккаунта
  - Подпись транзакции из стандартной учетной записи, если snapp_acount_delta > 0
  - Доказательство Pickles SNARK, которое будет проверяться (с помощью ключа подтверждения Snapp аккаунта) на соответствие с утверждением, включающим
    - snapp_account_delta : SignedAmount
    - snapp_prev_state : Array&lt;Field>
    - snapp_new_state : Array&lt;Field>

  В результате проведения этой транзакции будет обновлено состояния Snapp, изменено Snapp баланс с помощью snapp_acount_delta и баланс стандартной учетной записи с помощью -snapp_account_delta.

- Появится новый вид транзакции, называемый “Double Snapp транзакция”, что позволит одновременно обновлять состояния (и переводить средства между) двумя Snapp аккаунтами.
- Оно будет содержать:

  - Адрес Snapp аккаунта “address1”
  - Адрес Snapp аккаунта “address2”
  - Подписанную сумму account1_delta, которая отображает изменение баланса для первого аккаунта
  - Два опциональных новых состояния “account1_new_state” и “account2_new_state”
  - Подпись транзакции из стандартного аккаунта, если snapp_acount_delta > 0
  - Два доказательства SNARK Pickles proof1, proof2, которые для i = 1, 2 должны проверяться (с помощью i’s ключа проверки аккаунта) на соответствие с утверждением, включающим
    - account1_delta : SignedAmount
    - account1_prev_state : Array&lt;Field>
    - account1_new_state : Array&lt;Field>
    - account2_prev_state : Array&lt;Field>
    - account2_new_state : Array&lt;Field>

  В результате проведения этой транзакции будет обновлено оба состояния аккаунтов, изменен account1’s баланс с помощью account1_delta и account2’s баланс с помощью -account1_delta.

В настоящее  время O(1) Labs разрабатывает для разработчиков приложений инструментарий, который содержит уже существующие инструменты, такие как [snarky](https://github.com/o1-labs/snarky), для облегченной разработки Snapps и выполнения вычислений SNARK доказательств с помощью одного нажатия кнопки. Инструментарий будет совместим с Mina по умолчанию, предоставляя Snapps простой способ определения состояния и получения и финансовой ценности.

Рассмотрим пару примеров, которые продемонстрируют истинную мощь Snapps.

## Примеры

### Пример 1: Подтверждение кредитного рейтинга

**Ценностное предложение: **Предоставление заемщикам возможности доказать, что их кредитный рейтинг превышает определенный порог, без раскрытия самого рейтинга, и, таким образом, предоставление возможность занимать средства без предоставления каких-либо гарантий.

**Пример пользовательского потока:**

- Пользователь посещает сайт кредитора
- Его просят загрузить криптографически подписанную информацию от поставщика кредитных рейтингов, такого как CreditKarma
- Веб-сайт локально проверяет, превышает ли кредитный рейтинг пороговое значение, и вычисляет SNARK доказательство, возвращая результат
- SNARK доказательство и результат прикрепляются к Mina адресу пользователя и передаются в облачную систему кредитора (также может быть смарт-контракт)
- Кредитор верифицирует SNARK доказательство и превышение порога
- Кредит поступает на адрес Mina в стейблкоинах, если он соответствует критериям

**Как используется Snapp инструментарий: **Разработчик Snapp использует данный инструментарий для интеграции конкретной программы, которая просит пользователя загрузить подписанный кредитный рейтинг от поставщика, локально проверяет на компьютере пользователя соответствие рейтинга критериям, и локально генерирует доказательство для проверки, которое впоследствии возвращается разработчику. Набор инструментов также предоставляет пользователю не афишированный адрес Mina, который используется для предоставления метки времени для вычислений с помощью блока в блокчейне Mina. Инструментарий также используется для интеграции SNARK верификатора в свой собственный бэкенд, чтобы подтвердить валидность локальных вычислений.

### Пример 2: Подтверждение подлинности документа удостоверения личности (ID)

**Ценностное предложение: **Доказательство того, что владелец адреса Mina имеет доступ к подлинному ID (например, водительские права), без рассекречивания самого документа, начиная с определенной высоты блока. Валидность удостоверения личности будет проверяться стандартным алгоритмом с открытым исходным кодом.

**Пример пользовательского потока:**

- Пользователь посещает сайт, загружает приложение на ноутбук или мобильный телефон
- Пользователь использует приложение для сканирования ID и проверки его подлинности
- Приложение создает для пользователя кошелек в сети Mina
- Приложение связывает SNARK доказательство с Mina адресом пользователя вместе с хешем фотографии его ID
- Пользователь посещает другой сайт, который запрашивает аутентификацию. Пользователь может поделиться доказательством подлинности его ID вместе с хешем своего ID, чтобы подтвердить, что его адрес Mina претендует на подлинный ID

**Как используется Snapp инструментарий: **Snapp инструментарий предоставляет разработчику SDK для встраивания в свое приложение генератора SNARK доказательств, генератора хэшей, а также интерфейса Mina. Snapp инструментарий также предоставляет любому другому разработчику возможность проверить аутентификацию указанного ID с помощью SNARK верификатора.

### Пример 3: Подтверждение монетного баланса

**Ценностное предложение: **Предоставляет третьим лицам доказательство наличия средств, соответствующих определенным критериям (например, >\$10,000) в учетной записи Coinbase, принадлежащей определенному адресу электронной почты, без раскрытия фактической суммы депозита.

**Пример пользовательского потока:**

- Пользователь посещает приложение для кредитования. Чтобы занять средства, их просят иметь не менее >\$10,000 в биткойнах  на своем Coinbase счете
- Пользователь авторизируется в свою учетную запись Coinbase с помощью протокола OAuths
- Веб-сайт локально проверяет баланс и электронную почту пользователя, подписанные ключами Coinbase
- Веб-сайт локально генерирует SNARK доказательства, что баланс пользователя >\$10,000
- SNARK доказательство прилагается к адресу пользователя в сети Mina
- Пользователь подписывает право собственности на SNARK доказательство, используя свой Mina адрес, и передает адрес электронной почты своего Coinbase аккаунта бэкенду приложения кредитования

**Как используется Snapp инструментарий: **Разработчик Snapp использует набор инструментов для интеграции определенной программы, с помощью которой пользователь авторизируется в свою учетную запись Coinbase через протокол OAuth, запрашивает баланс учетной записи для получения подписанной информации о балансе, адреса электронной почты от учетной записи и отметки времени. Инструментарий позволяет локально генерировать SNARK доказательство, без обменивания какой-либо информацией с бэкэндом поставщика услуг, поэтому вся информация о балансе остается конфиденциальной. Разработчик также использует набор инструментов для интеграции SNARK верификатора в свой собственный бэкенд, для подтверждения валидности локальных вычислений.

### Пример 4: Частное голосование

**Ценностное предложение: **Разрешить группе правомочных избирателей (например, любой учетной записи Twitter с более чем 100 подписчиками) голосовать приватно не раскрывая кто они и за что голосовали. Любой желающий сможет легко проверить результат всего голосования по окончанию периода голосования.

**Пример пользовательского потока:**

- Пользователь может подтвердить право собственности на данную учетную запись, предъявив протокол HTTPS об успешном входе в twitter.com. Чтобы пройти аутентификацию и проголосовать, они должны доказать (публичный вклад выделен оранжевым цветом): “Мне известны данные аккаунта A с паролем P,  и валидная транскрипция входа для (A, P),  и хеш (A, P) = **N**,  и я голосую за вариант **V**”.  **N** обозначает “обнулитель”, и он уникален для данного пользователя/пароля и используется для предотвращения двойного голосования.
- В полностью децентрализованном режиме пользователь может использовать это доказательство для обновления состояния приложения для голосования в цепочке Mina.
- В частично децентрализованном режиме с более высокой пропускной способностью пользователь отправит свое доказательство с нулевым разглашением агрегатору доказательств, который поддерживает состояние выборов и объединяет пользовательские доказательства в одно обобщенное доказательство, которое затем отправляется в цепочку Mina.
- При просмотре результатов выборов пользователь получает основное доказательство блокчейна Mina, которое удостоверяет валидность всего дерева Меркла Mina, включая лист, отвечающий за состояние выборов. В лист также включается путь Меркла, чтобы можно было проверить состояние.

### Другие идеи 

Проектное пространство для Snapps огромно и будет пополняться многочисленными инновационными идеями, которые будут возникать у предпринимателей по мере лучшего понимания структуры. Вот еще несколько примеров, над которыми мы раздумывали:

- Подтверждение возраста с использованием документа, удостоверяющего личность
- Подтверждение гражданства с использованием документа, удостоверяющего личность
- Подтверждение зарплаты через банковский счет
- Доказательство отсутствия активности. К примеру доказательство того, что адрес блокчейна, связанный с конкретным идентификатором, не отправлял деньги на адреса кошелька, внесенные в черный список, без раскрытия адреса
- Доказательство ограниченных изменений документа, например изменение размера подтвержденной фотографии

## Следующие шаги и вовлечение сообщества

O (1) Labs усердно работает над созданием Snapp инструментария, который сделает приведенные выше примеры возможными в блокчейне Mina, и сотрудничает с талантливыми разработчиками для создания первого доказательства реализации концепции.

Однако для Snapps нет предела. Таким образом, мы хотели бы пригласить сообщество Mina присоединиться к нам в формировании различных вариантов использования Snapp и пользовательских потоков, а также помочь нам в разработке инструментов и приложений, внося свой вклад в код. Если вы хотите присоединиться к исследованию этого совершенно нового проектного пространства для создания конфиденциальных и верифицируемых приложений, начните с заполнения этой [формы](https://forms.gle/PsM1AmZMveE3RhaV8).
